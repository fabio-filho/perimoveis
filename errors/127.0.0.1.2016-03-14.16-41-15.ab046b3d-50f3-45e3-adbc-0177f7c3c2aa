(dp1
S'output'
p2
S"<type 'exceptions.NameError'> global name 'mForm' is not defined"
p3
sS'layer'
p4
S'/Users/fabiofilho/Documents/Deployment/Web2Py/web2py/applications/perimoveis/controllers/product.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n\n\n\n\ndef index():\n\n    return dict(mRows=db(db.tbProducts.id>0).select())\n\n\n\n@auth.requires_login()\ndef add():\n    Validator.admin()\n\n    mForm=SQLFORM(db.tbProducts, submit_button=T(\'Add a product\'))\n\n    Validator.form_process(mForm, URL(\'product\', \'index\'))\n\n    return dict(mForm=mForm)\n\n\n\n@auth.requires_login()\ndef edit():\n    Validator.admin()\n    Validator.valide_args(1)\n\n    Validator.form_process(mForm, URL(\'product\', \'index\'), submit_button=T(\'Save changes\'))\n\n    return dict(mForm=mForm)\n\n\n\n\n@auth.requires_login()\ndef add_image():\n\n  mForm = FORM(LABEL(T("File")+"(s):"), INPUT(_name=\'mFiles\', _type=\'file\', _multiple=\'\'),\n      BR(),INPUT(_type=\'submit\'))\n\n  if mForm.accepts(request.vars, formname="mForm"):\n\n    if hasattr(request.vars, \'mFiles\'):\n      if len(request.vars.mFiles) > 0:\n\n        mFiles = request.vars[\'mFiles\']\n        if not isinstance(mFiles, list):\n          mFiles = [files]\n\n        print \'#=================\', request.now\n        for f in mFiles:\n          print f.mFilename\n          mFile = db.tbProductsUploads.mFile.store(f, f.mFilename)\n          db.tbProductsUploads.insert(mFile=mFile, mFilename=f.mFilename)\n          db.commit()\n\n        redirect(URL(\'product\', \'index\'))\n      else:\n        mForm.errors.mFiles = "No files selected"\n\n  return dict(mForm=mForm)\n\nresponse._vars=response._caller(edit)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/Users/fabiofilho/Documents/Deployment/Web2Py/web2py/gluon/restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "/Users/fabiofilho/Documents/Deployment/Web2Py/web2py/applications/perimoveis/controllers/product.py", line 64, in <module>\n  File "/Users/fabiofilho/Documents/Deployment/Web2Py/web2py/gluon/globals.py", line 412, in <lambda>\n    self._caller = lambda f: f()\n  File "/Users/fabiofilho/Documents/Deployment/Web2Py/web2py/gluon/tools.py", line 4236, in f\n    return action(*a, **b)\n  File "/Users/fabiofilho/Documents/Deployment/Web2Py/web2py/applications/perimoveis/controllers/product.py", line 29, in edit\n    Validator.form_process(mForm, URL(\'product\', \'index\'), submit_button=T(\'Save changes\'))\nNameError: global name \'mForm\' is not defined\n'
p11
s.